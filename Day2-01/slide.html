<!DOCTYPE html>
<html lang="en"><head>
<script src="slide_files/libs/clipboard/clipboard.min.js"></script>
<script src="slide_files/libs/quarto-html/tabby.min.js"></script>
<script src="slide_files/libs/quarto-html/popper.min.js"></script>
<script src="slide_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="slide_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="slide_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="slide_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="slide_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.361">

  <meta name="author" content="EPFL Extension School">
  <meta name="dcterms.date" content="2023-09-29">
  <title>Bayesian A/B Testing</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="slide_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="slide_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="slide_files/libs/revealjs/dist/theme/quarto.css">
  <link href="slide_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="slide_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="slide_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="slide_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="slide_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="slide_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="slide_files/libs/quarto-diagram/mermaid.min.js"></script>
  <script src="slide_files/libs/quarto-diagram/mermaid-init.js"></script>
  <link href="slide_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
  <script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/AdobeStock_430543026.jpeg" data-visibility="hidden" class="quarto-title-block center">
  <h1 class="title">Bayesian A/B Testing</h1>
  <p class="subtitle">Bernoulli and Value Conversions</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
EPFL Extension School 
</div>
        <p class="quarto-title-affiliation">
            World Economic Forum
          </p>
    </div>
</div>

  <p class="date">2023-09-29</p>
</section>
<section id="section" class="slide level2" data-chalkboard-buttons="false" data-background-image="img/AdobeStock_430543026.jpeg" data-background-size="cover">
<h2></h2>
</section>
<section id="whats-the-plan" class="slide level2">
<h2>What’s the Plan?</h2>
<h4 id="this-session">This session</h4>
<div class="cell" data-reveal="true">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart BT
    A([Python]) -----&gt; E([PyMC])
    B([Statistics])---&gt;D([A/B testing]) 
    B([Statistics]) ---&gt; C([Bayes Rule]) 
    C([Bayes Rule]) --&gt; D([A/B testing])  
    C([Bayes Rule]) ---&gt; F[(Bayesian A/B Testing in PyMC)]
    E([PyMC]) --&gt; F[(Bayesian A/B Testing in PyMC)]
    D([A/B testing])  ---&gt; F[(Bayesian A/B Testing in PyMC)]
    click A "https://github.com/epfl-exts/WEF-workshop-2023/tree/main/Day1-01"
    click B "https://github.com/epfl-exts/WEF-workshop-2023/tree/main/Day1-02"
    click C "https://github.com/epfl-exts/WEF-workshop-2023/tree/main/Day1-03"
    click D "https://github.com/epfl-exts/WEF-workshop-2023/tree/main/Day1-04"
    click E "https://github.com/epfl-exts/WEF-workshop-2023/tree/main/Day2-01"
    click F "https://github.com/epfl-exts/WEF-workshop-2023/tree/main/Day2-01"
    linkStyle 5,6 stroke:#bcf5bc,stroke-width:6px
%%    style A fill:#bcf5bc
%%    style B fill:#bcf5bc
%%    style C fill:#bcf5bc
    style D fill:#bcf5bc
    style E fill:#bcf5bc
    style F fill:#bcf5bc
</pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>Today we continue with the Bayesian A/B testing from yesterday, and then learn how to do it in Python with the PyMC library.</p>
<p>We go through the Bernoulli and Value Conversion problems before the coffee break, and then we have a hands-on session on implementing them in PyMC.</p>
<p>In the afternoon you will be on your own to implement the A/B testing problem in PyMC.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section-1" class="slide level2" data-chalkboard-buttons="false" data-background-image="../assets/img/AdobeStock_536776996.jpeg" data-background-size="cover">
<h2></h2>
<p><span style="font-size: 1.5em; font-weight: bold;">Goal of This Session:</span></p>
<p><br></p>
<p><span class="emoji" data-emoji="heavy_check_mark">✔️</span> Python</p>
<p><span class="emoji" data-emoji="heavy_check_mark">✔️</span> Statistical Distributions</p>
<p><span class="emoji" data-emoji="heavy_check_mark">✔️</span> Bayesian Statistics</p>
<p><span class="emoji" data-emoji="heavy_check_mark">✔️</span> Bayesians vs Frequentists</p>
<p><span class="emoji" data-emoji="heavy_check_mark">✔️</span> A/B Testing</p>
<p>☐ <span style="color:#ff412c;">A/B Testing in Python</span></p>
<aside class="notes">
<p>And you can do all of this because we have covered all of the elements in the previous sessions. So, let’s get started.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="ab-testing" class="slide level2">
<h2>A/B Testing</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>We have a website and we want to increase the number of <code>visitors</code> that make a subscription</li>
<li>We have two versions of the website: <code>A</code> and <code>B</code></li>
</ul>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_532613325.jpeg" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>We want to know which version leads to more <code>subscriptions</code></li>
<li>We can use A/B testing to compare the two versions<br>
</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_120197715.jpeg" style="width:65.0%;height:65.0%"></p>
</figure>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:90%;">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<ul>
<li>Here the target action is the <code>subscriptions</code>, but we can generalize this to any action that we want to increase, e.g.&nbsp;clicks, purchases, likes, time spent on the website, etc.</li>
<li>A visitor that makes a subscription is called a <code>conversion</code></li>
</ul>
</div>
</div>
</div>
</div><div class="column" style="width:1%;">

</div>
</div>
<aside class="notes">
<p>A/B testing is a method of comparing two versions of a ‘product’ to determine which one performs better</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="setting-up-the-model" class="slide level2">
<h2>Setting up the Model</h2>
<p><br></p>
<div class="columns">
<div class="column" style="width:70%;">
<h4 id="parameters">Parameters</h4>
<ul>
<li><span class="math inline">\(\theta_A\)</span> is the conversion probability for version A</li>
<li><span class="math inline">\(\theta_B\)</span> is the conversion probability for version B <!-- - $\frac{\theta_B}{\theta_A}-1$ is the uplift of version B compared to version A --></li>
</ul>
</div><div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_169591536.jpeg" style="width:75.0%;height:75.0%"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<h4 id="priors">Priors</h4>
<div class="columns">
<div class="column" style="width:70%;">
<ul>
<li>Conversion probabilities are Beta distributed: <span class="math display">\[\theta_A \sim Beta(\alpha_A, \beta_A)\]</span> <span class="math display">\[\theta_B \sim Beta(\alpha_B, \beta_B)\]</span></li>
<li>For simplicity we assume <span class="math inline">\(\alpha_A=\beta_A=\alpha_B=\beta_B\)</span></li>
</ul>
</div><div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_105107192.jpeg" style="width:75.0%;height:75.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="setting-up-the-model-1" class="slide level2">
<h2>Setting up the Model</h2>
<p><br></p>
<div class="columns">
<div class="column" style="width:70%;">
<h4 id="likelihoods">Likelihoods</h4>
<ul>
<li>Both versions get <code>visitors</code></li>
<li>Whether a visitor converts is Bernoulli distributed with conversion probability <span class="math inline">\(\theta\)</span></li>
</ul>
</div><div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_124620223.jpeg" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<h4 id="posteriors">Posteriors</h4>
<div class="columns">
<div class="column" style="width:70%;">
<ul>
<li>Remember that in this case posteriors are also Beta distributed, thanks to the conjugate property</li>
<li>We can get them via sampling methods too. So no worries if we can’t benefit from the conjugate property</li>
</ul>
</div><div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_109501465.jpeg" style="width:75.0%;height:75.0%"></p>
</figure>
</div>
</div>
</div>
<aside class="notes">
<p>visitors are like the trials or coin flips in the Bernoulli distribution. We have 1000 trials for each variant. conversions are like the successes or number of heads in the Bernoulli distribution. We have 200 successes for each variant.</p>
<p>Each visitor action to <code>convert</code> or not is Bernoulli distributed with conversion probability <span class="math inline">\(\theta\)</span></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="remarks" class="slide level2">
<h2>Remarks</h2>
<p><br></p>
<div class="callout callout-note callout-titled callout-style-simple">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Notes</strong></p>
</div>
<div class="callout-content">
<ul>
<li>Priors can be different for each version</li>
<li>Number of visitors can be different for each version</li>
<li>Conversions are happenning independently</li>
</ul>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/AdobeStock_601177870.jpeg" style="width:75.0%;height:75.0%"></p>
</figure>
</div>
</section>
<section id="what-do-we-want-to-know" class="slide level2">
<h2>What Do We Want to Know?</h2>
<p><br> Our goal is to find out which version is better, and that’s why we need the <code>uplift</code> <span class="math inline">\(\frac{\theta_B}{\theta_A}-1\)</span>:</p>
<ul>
<li>if the <code>uplift &gt; 0</code>, then version B is better</li>
<li>if the <code>uplift &lt; 0</code>, then version A is better</li>
<li>if the <code>uplift = 0</code>, then there is no difference between the two versions</li>
</ul>
<!-- ::: {style="text-align: center"}
::: box
Luckily we get the whole distribution of the uplift, not just these three states
:::
::: -->
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Luckily we get the whole uplift distribution, not just these three states 😃</p>
</div>
</div>
</div>
</div>
<!-- ## ![](https://cdn.rawgit.com/pymc-devs/pymc/main/docs/logos/svg/PyMC_banner.svg){width="150px" height="150px" fig-align="left"} -->
<p><br></p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:60%;">
<p>This is where we need PyMC 🌱, a Python library for Bayesian statistical modeling, and we use it to do the Bayesian inference for the A/B testing problem.</p>
<p>We can simply import it by:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pymc <span class="im">as</span> pm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="https://cdn.rawgit.com/pymc-devs/pymc/main/docs/logos/svg/PyMC_banner.svg" style="width:95.0%;height:95.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>is a python library for Bayesian statistical modeling and model fitting which focuses on advanced Markov chain Monte Carlo and variational fitting algorithms. Its flexibility and extensibility make it applicable to a large suite of problems. Along with core sampling functionality, PyMC includes methods for summarizing output, plotting, goodness-of-fit and convergence diagnostics.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="define-parameters-in" class="slide level2">
<h2>Define Parameters in <img data-src="img/PyMC.png" class="center"></h2>
<p><br></p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2" data-code-line-numbers="1,2|4,5|7,8|10,11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># let's define the variants A and B</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>variants  <span class="op">=</span> [<span class="st">'A'</span>, <span class="st">'B'</span>]</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># let each variant to have 1000 trail </span></span>
<span id="cb2-5"><a href="#cb2-5"></a>visitors    <span class="op">=</span> [<span class="dv">1000</span>, <span class="dv">1000</span>]</span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co"># 200 of which leads to success</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>conversion <span class="op">=</span> [<span class="dv">200</span>, <span class="dv">200</span>]</span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co"># let's define parameters for a prior for the conversion rates</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>alpha, beta <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- #

from scipy.stats import beta

# plot probability distribution
x = np.linspace(0,1,100)
fig, ax = plt.subplots(figsize=(5, 3))
plt.plot(x, beta.pdf(x, alpha, beta), 'r-', lw=2, )
plt.xlabel(r'$\theta$')
plt.title(r'$\beta(100,100)$ PDF')
plt.show()

``` -->
</section>
<section id="creating-a-model-in" class="slide level2">
<h2>Creating a Model in <img data-src="img/PyMC.png" class="center"></h2>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3" data-code-line-numbers="1|4|5,6|7|10|11,12|4,13|7,14|4,17,18|21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="cf">with</span> pm.Model() <span class="im">as</span> example_model:</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>    <span class="co"># Priors for unknown model parameters</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>    theta <span class="op">=</span> pm.Beta(<span class="st">"theta"</span>, </span>
<span id="cb3-5"><a href="#cb3-5"></a>                    alpha <span class="op">=</span> alpha, </span>
<span id="cb3-6"><a href="#cb3-6"></a>                    beta  <span class="op">=</span> beta, </span>
<span id="cb3-7"><a href="#cb3-7"></a>                    shape <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb3-8"><a href="#cb3-8"></a>    </span>
<span id="cb3-9"><a href="#cb3-9"></a>    <span class="co"># Likelihood (sampling distribution) of observations</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>    obs <span class="op">=</span> pm.Binomial(<span class="st">"y"</span>, </span>
<span id="cb3-11"><a href="#cb3-11"></a>                      n        <span class="op">=</span> visitors, </span>
<span id="cb3-12"><a href="#cb3-12"></a>                      observed <span class="op">=</span> conversion, </span>
<span id="cb3-13"><a href="#cb3-13"></a>                      p        <span class="op">=</span> theta,</span>
<span id="cb3-14"><a href="#cb3-14"></a>                      shape    <span class="op">=</span> <span class="dv">2</span>) </span>
<span id="cb3-15"><a href="#cb3-15"></a>    </span>
<span id="cb3-16"><a href="#cb3-16"></a>    <span class="co"># Difference between variants</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>    relative_uplift <span class="op">=</span> pm.Deterministic(<span class="st">"uplift"</span>, </span>
<span id="cb3-18"><a href="#cb3-18"></a>                                        theta[<span class="dv">1</span>] <span class="op">/</span> theta[<span class="dv">0</span>] <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb3-19"><a href="#cb3-19"></a></span>
<span id="cb3-20"><a href="#cb3-20"></a>    <span class="co"># Draw samples from the posterior</span></span>
<span id="cb3-21"><a href="#cb3-21"></a>    trace <span class="op">=</span> pm.sample(draws<span class="op">=</span><span class="dv">1000</span>, return_inferencedata<span class="op">=</span><span class="va">False</span>, progressbar<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ::: fragment -->
<div class="absolute" style="top: 15%; left: 7%; bottom: 70%; width: 610px; ">
<div class="blackbox">

</div>
</div>
<!-- ::: -->
<!-- ::: fragment -->
<div class="absolute" style="top: 33%; left: 7%; bottom: 51%; width: 610px; ">
<div class="blackbox">

</div>
</div>
<!-- ::: -->
<!-- ::: fragment -->
<div class="absolute" style="top: 52%; left: 7%; bottom: 38%; width: 610px; ">
<div class="blackbox">

</div>
</div>
<!-- ::: -->
<div class="absolute" style="top: 65%; left: 7%; bottom: 30%; width: 750px; ">
<div class="blackbox">

</div>
</div>
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/Screenshot%202023-07-16%20at%2016.12.14.png" style="width:80.0%;height:80.0%"></p>
</figure>
</div>
<aside class="notes">
<p>What about the with statement at the beginning?</p>
<ul>
<li><p>with statement is the context manager. Context manager is usually used for opening/closing files in python. Here it creates a context for the model and defines its variables.</p></li>
<li><p>it is a python construct that allows you to do something before and after a block of code. In this case it opened the model and closed it after the sampling is done.</p></li>
<li><p>Any time you declare a pymc variable inside a with statement (or context manager), it gets added to the model.</p></li>
</ul>
<p>Here it opens a model (WITH pm.Model() AS model) and populate it with the priors and variables. Then it runs the model and samples from the posterior.</p>
<p>Model is an object which is a container for the model random variables. It is the top level container for all probability models.</p>
<p>chain: Each row of an array is treated as an independent series of draws from the variable, called a chain</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="checking-the-model-specification" class="slide level2">
<h2>Checking the Model Specification</h2>
<p>Unobserved Random Variables:</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>example_model.unobserved_RVs  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>[theta, uplift]</code></pre>
</div>
</div>
<p><br></p>
<p>Observed Random Variables:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>example_model.observed_RVs  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>[y]</code></pre>
</div>
</div>
<p><br></p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>trace</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>&lt;MultiTrace: 4 chains, 1000 iterations, 3 variables&gt;</code></pre>
</div>
</div>
<p><br></p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>trace.theta.shape,  trace.uplift.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>((4000, 2), (4000,))</code></pre>
</div>
</div>
</section>
<section id="ploting-the-output" class="slide level2">
<h2>Ploting the Output</h2>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's put the trace into a dataframe</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([pd.DataFrame(trace[<span class="st">'theta'</span>]), </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                pd.DataFrame(trace[<span class="st">'uplift'</span>])],</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>df.columns <span class="op">=</span> [<span class="st">'theta_A'</span>,<span class="st">'theta_B'</span>,<span class="st">'uplift'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">plot</a></li><li><a href="#tabset-1-2">show it</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb13" data-code-line-numbers="5,9,13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># let's create a  subplot with three plots in a row that shows the theta_A, theta_B and uplift</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">3</span>), sharey<span class="op">=</span><span class="va">True</span>, sharex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co"># plot the distribution of theta_A</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>ax[<span class="dv">0</span>].hist(df[<span class="st">'theta_A'</span>],bins<span class="op">=</span><span class="dv">50</span>,)</span>
<span id="cb13-6"><a href="#cb13-6"></a>ax[<span class="dv">0</span>].set_title(<span class="vs">r'$\theta_A$'</span>)</span>
<span id="cb13-7"><a href="#cb13-7"></a></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="co"># plot the distribution of theta_B</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>ax[<span class="dv">1</span>].hist(df[<span class="st">'theta_B'</span>],bins<span class="op">=</span><span class="dv">50</span>,)</span>
<span id="cb13-10"><a href="#cb13-10"></a>ax[<span class="dv">1</span>].set_title(<span class="vs">r'$\theta_B$'</span>)</span>
<span id="cb13-11"><a href="#cb13-11"></a></span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="co"># plot the distribution of uplift</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>ax[<span class="dv">2</span>].hist(df[<span class="st">'uplift'</span>], bins<span class="op">=</span><span class="dv">50</span>,)</span>
<span id="cb13-14"><a href="#cb13-14"></a>ax[<span class="dv">2</span>].set_title(<span class="st">'uplift'</span>)</span>
<span id="cb13-15"><a href="#cb13-15"></a></span>
<span id="cb13-16"><a href="#cb13-16"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell" data-execution_count="10">
<div class="cell-output cell-output-display">
<p><img data-src="slide_files/figure-revealjs/cell-11-output-1.png" width="947" height="292"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="changing-the-output-type" class="slide level2">
<h2>Changing the Output Type</h2>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14" data-code-line-numbers="22,23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="cf">with</span> pm.Model() <span class="im">as</span> example_model:</span>
<span id="cb14-2"><a href="#cb14-2"></a></span>
<span id="cb14-3"><a href="#cb14-3"></a>    <span class="co"># Priors for unknown model parameters</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>    theta <span class="op">=</span> pm.Beta(<span class="st">"theta"</span>, </span>
<span id="cb14-5"><a href="#cb14-5"></a>                    alpha <span class="op">=</span> alpha, </span>
<span id="cb14-6"><a href="#cb14-6"></a>                    beta  <span class="op">=</span> beta, </span>
<span id="cb14-7"><a href="#cb14-7"></a>                    shape <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb14-8"><a href="#cb14-8"></a>    </span>
<span id="cb14-9"><a href="#cb14-9"></a>    <span class="co"># Likelihood (sampling distribution) of observations</span></span>
<span id="cb14-10"><a href="#cb14-10"></a>    obs <span class="op">=</span> pm.Binomial(<span class="st">"y"</span>, </span>
<span id="cb14-11"><a href="#cb14-11"></a>                      n <span class="op">=</span> visitors, </span>
<span id="cb14-12"><a href="#cb14-12"></a>                      p <span class="op">=</span> theta, </span>
<span id="cb14-13"><a href="#cb14-13"></a>                      observed <span class="op">=</span> conversion,</span>
<span id="cb14-14"><a href="#cb14-14"></a>                      shape <span class="op">=</span> <span class="dv">2</span>) </span>
<span id="cb14-15"><a href="#cb14-15"></a>    </span>
<span id="cb14-16"><a href="#cb14-16"></a>    <span class="co"># Difference between variants</span></span>
<span id="cb14-17"><a href="#cb14-17"></a>    relative_uplift <span class="op">=</span> pm.Deterministic(<span class="st">"uplift"</span>, </span>
<span id="cb14-18"><a href="#cb14-18"></a>                                        theta[<span class="dv">1</span>] <span class="op">/</span> theta[<span class="dv">0</span>] <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb14-19"><a href="#cb14-19"></a></span>
<span id="cb14-20"><a href="#cb14-20"></a>    <span class="co"># Draw samples from the prior</span></span>
<span id="cb14-21"><a href="#cb14-21"></a>    trace <span class="op">=</span> pm.sample(draws<span class="op">=</span><span class="dv">1000</span>, </span>
<span id="cb14-22"><a href="#cb14-22"></a>                      return_inferencedata<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<style>
    /* Turns off some styling */
    progress {
        /* gets rid of default border in Firefox and Opera. */
        border: none;
        /* Needs to be in here for Safari polyfill so background images work as expected. */
        background-size: auto;
    }
    progress:not([value]), progress:not([value])::-webkit-progress-bar {
        background: repeating-linear-gradient(45deg, #7e7e7e, #7e7e7e 10px, #5c5c5c 10px, #5c5c5c 20px);
    }
    .progress-bar-interrupted, .progress-bar-interrupted::-webkit-progress-bar {
        background: #F44336;
    }
</style>
</div>
<div class="cell-output cell-output-display">

    <div>
      <progress value="8000" class="" max="8000" style="width:300px; height:20px; vertical-align: middle;"></progress>
      100.00% [8000/8000 00:02&lt;00:00 Sampling 4 chains, 0 divergences]
    </div>
    
</div>
</div>
</section>
<section id="changing-the-output-type-1" class="slide level2">
<h2>Changing the Output Type</h2>
<p>Let’s check the output:</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>trace</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">


            <div>
              <div class="xr-header">
                <div class="xr-obj-type">arviz.InferenceData</div>
              </div>
              <ul class="xr-sections group-sections">
              
            <li class="xr-section-item">
                  <input id="idata_posterior5fe7173b-745b-4fa6-b422-9be0115b7853" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_posterior5fe7173b-745b-4fa6-b422-9be0115b7853" class="xr-section-summary">posterior</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:      (chain: 4, draw: 1000, theta_dim_0: 2)
Coordinates:
  * chain        (chain) int64 0 1 2 3
  * draw         (draw) int64 0 1 2 3 4 5 6 7 ... 993 994 995 996 997 998 999
  * theta_dim_0  (theta_dim_0) int64 0 1
Data variables:
    theta        (chain, draw, theta_dim_0) float64 0.2065 0.2145 ... 0.1867
    uplift       (chain, draw) float64 0.03886 0.03009 ... -0.1166 -0.1912
Attributes:
    created_at:                 2023-09-23T12:35:22.126105
    arviz_version:              0.16.0
    inference_library:          pymc
    inference_library_version:  5.5.0
    sampling_time:              19.50476098060608
    tuning_steps:               1000</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-a254159b-7627-49f7-9b98-21664bcc4ce1" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-a254159b-7627-49f7-9b98-21664bcc4ce1" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">theta_dim_0</span>: 2</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-4bd4341f-e8b1-4b52-bd7e-c2bb35a5f63a" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-4bd4341f-e8b1-4b52-bd7e-c2bb35a5f63a" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input id="attrs-38c09ea8-2839-49d9-a680-85435b4b1e9c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-38c09ea8-2839-49d9-a680-85435b4b1e9c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-07de1056-e35f-4d55-a494-94788fe078ff" class="xr-var-data-in" type="checkbox"><label for="data-07de1056-e35f-4d55-a494-94788fe078ff" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-54275754-fff9-41ff-a54d-5e10e9df5516" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-54275754-fff9-41ff-a54d-5e10e9df5516" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-35b81522-4707-479e-9f02-3ada58a045eb" class="xr-var-data-in" type="checkbox"><label for="data-35b81522-4707-479e-9f02-3ada58a045eb" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">theta_dim_0</span></div><div class="xr-var-dims">(theta_dim_0)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1</div><input id="attrs-393d4109-fd9a-4fae-afe3-cbbaad230911" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-393d4109-fd9a-4fae-afe3-cbbaad230911" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b06d97ee-6855-4924-b744-5b1f0d599663" class="xr-var-data-in" type="checkbox"><label for="data-b06d97ee-6855-4924-b744-5b1f0d599663" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-3a52b751-7285-41bd-8209-07bb321dbcb1" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-3a52b751-7285-41bd-8209-07bb321dbcb1" class="xr-section-summary">Data variables: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>theta</span></div><div class="xr-var-dims">(chain, draw, theta_dim_0)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.2065 0.2145 ... 0.2308 0.1867</div><input id="attrs-16234302-d6c6-4802-9e5e-1cd81af6430c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-16234302-d6c6-4802-9e5e-1cd81af6430c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-f7066a98-d1bd-48d2-883d-3ed6a1e1da5d" class="xr-var-data-in" type="checkbox"><label for="data-f7066a98-d1bd-48d2-883d-3ed6a1e1da5d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[0.20648584, 0.21451038],
        [0.20410753, 0.2102498 ],
        [0.19091915, 0.20907783],
        ...,
        [0.18855866, 0.19545662],
        [0.22593186, 0.20251548],
        [0.21815167, 0.20627148]],

       [[0.20262065, 0.21722288],
        [0.20126551, 0.22397671],
        [0.20131987, 0.20565779],
        ...,
        [0.18092533, 0.19303475],
        [0.19064662, 0.20276193],
        [0.2249788 , 0.20390884]],

       [[0.25167609, 0.21770507],
        [0.21478256, 0.20371854],
        [0.19940078, 0.19030001],
        ...,
        [0.18845585, 0.1690814 ],
        [0.22429765, 0.20493661],
        [0.18511059, 0.21865916]],

       [[0.18393355, 0.21807239],
        [0.18885466, 0.20344522],
        [0.19027222, 0.2156346 ],
        ...,
        [0.18376273, 0.2070795 ],
        [0.22533468, 0.19905958],
        [0.23080468, 0.18667553]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>uplift</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.03886 0.03009 ... -0.1166 -0.1912</div><input id="attrs-2aefe723-f920-469d-a6b6-544ca4c16379" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2aefe723-f920-469d-a6b6-544ca4c16379" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-aa93ea1b-f8f4-44c0-9818-9dfc8d4f74c5" class="xr-var-data-in" type="checkbox"><label for="data-aa93ea1b-f8f4-44c0-9818-9dfc8d4f74c5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 0.03886242,  0.03009332,  0.09511191, ...,  0.03658256,
        -0.10364358, -0.05445841],
       [ 0.07206682,  0.11284195,  0.0215474 , ...,  0.06693048,
         0.06354848, -0.09365311],
       [-0.13497912, -0.05151268, -0.04564063, ..., -0.10280629,
        -0.08631854,  0.18123531],
       [ 0.18560417,  0.07725814,  0.13329524, ...,  0.12688522,
        -0.1166048 , -0.19119696]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-f4d74953-e101-4935-8cb2-c6c6791ba32d" class="xr-section-summary-in" type="checkbox"><label for="section-f4d74953-e101-4935-8cb2-c6c6791ba32d" class="xr-section-summary">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-6a426412-c069-43ff-be0e-c06c6dcf4319" class="xr-index-data-in" type="checkbox"><label for="index-6a426412-c069-43ff-be0e-c06c6dcf4319" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Int64Index([0, 1, 2, 3], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-f7cdc815-a6f6-4a71-9c1d-7a07b91705dc" class="xr-index-data-in" type="checkbox"><label for="index-f7cdc815-a6f6-4a71-9c1d-7a07b91705dc" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Int64Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
            ...
            990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
           dtype='int64', name='draw', length=1000))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>theta_dim_0</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-d68a981d-66d2-46ea-85cc-5d223fe636ca" class="xr-index-data-in" type="checkbox"><label for="index-d68a981d-66d2-46ea-85cc-5d223fe636ca" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Int64Index([0, 1], dtype='int64', name='theta_dim_0'))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-bc27f596-c05c-41c5-8f6d-2820972a72bb" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-bc27f596-c05c-41c5-8f6d-2820972a72bb" class="xr-section-summary">Attributes: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2023-09-23T12:35:22.126105</dd><dt><span>arviz_version :</span></dt><dd>0.16.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.5.0</dd><dt><span>sampling_time :</span></dt><dd>19.50476098060608</dd><dt><span>tuning_steps :</span></dt><dd>1000</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_sample_stats117a010b-5380-420e-8665-ff82e70d8388" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_sample_stats117a010b-5380-420e-8665-ff82e70d8388" class="xr-section-summary">sample_stats</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:                (chain: 4, draw: 1000)
Coordinates:
  * chain                  (chain) int64 0 1 2 3
  * draw                   (draw) int64 0 1 2 3 4 5 ... 994 995 996 997 998 999
Data variables: (12/17)
    energy_error           (chain, draw) float64 -0.2463 -0.1623 ... 0.497
    acceptance_rate        (chain, draw) float64 0.8204 1.0 ... 0.9329 0.6084
    step_size              (chain, draw) float64 1.282 1.282 ... 1.388 1.388
    perf_counter_diff      (chain, draw) float64 0.0003708 ... 0.0001655
    n_steps                (chain, draw) float64 3.0 1.0 3.0 3.0 ... 3.0 3.0 1.0
    max_energy_error       (chain, draw) float64 0.4121 -0.1623 ... 0.2249 0.497
    ...                     ...
    process_time_diff      (chain, draw) float64 0.00037 0.000186 ... 0.000166
    energy                 (chain, draw) float64 12.61 11.23 ... 12.58 14.33
    index_in_trajectory    (chain, draw) int64 3 -1 -1 -3 1 -1 ... -3 -2 0 2 2 1
    reached_max_treedepth  (chain, draw) bool False False False ... False False
    perf_counter_start     (chain, draw) float64 1.735e+05 ... 1.735e+05
    smallest_eigval        (chain, draw) float64 nan nan nan nan ... nan nan nan
Attributes:
    created_at:                 2023-09-23T12:35:22.140158
    arviz_version:              0.16.0
    inference_library:          pymc
    inference_library_version:  5.5.0
    sampling_time:              19.50476098060608
    tuning_steps:               1000</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-28a722eb-81fb-412e-b126-4b9635fcd34d" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-28a722eb-81fb-412e-b126-4b9635fcd34d" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 1000</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-40233130-e051-4937-b4a4-1905f7c0cf29" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-40233130-e051-4937-b4a4-1905f7c0cf29" class="xr-section-summary">Coordinates: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input id="attrs-f031de78-83b4-4860-94f6-86ed02ee9b1f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f031de78-83b4-4860-94f6-86ed02ee9b1f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-db95ba40-dee4-4abc-97b8-015daa82c327" class="xr-var-data-in" type="checkbox"><label for="data-db95ba40-dee4-4abc-97b8-015daa82c327" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-813f906d-4ffe-4959-93b4-d71ad029b578" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-813f906d-4ffe-4959-93b4-d71ad029b578" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5d9d9a1b-df7f-4b51-b1d1-774cd40811ec" class="xr-var-data-in" type="checkbox"><label for="data-5d9d9a1b-df7f-4b51-b1d1-774cd40811ec" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-10dc7ae8-3363-4968-860b-7526f33dc721" class="xr-section-summary-in" type="checkbox"><label for="section-10dc7ae8-3363-4968-860b-7526f33dc721" class="xr-section-summary">Data variables: <span>(17)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>energy_error</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.2463 -0.1623 ... 0.2249 0.497</div><input id="attrs-2d56a89d-88dc-40c8-8818-189542faea85" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2d56a89d-88dc-40c8-8818-189542faea85" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-14ef896f-38f2-4a6d-8fd4-0f7a3655e229" class="xr-var-data-in" type="checkbox"><label for="data-14ef896f-38f2-4a6d-8fd4-0f7a3655e229" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-0.24625415, -0.16227842,  0.05993467, ..., -0.21146146,
         0.39180585, -0.3073917 ],
       [-0.09205957,  0.31227261, -0.60064481, ...,  0.30695791,
        -0.39285536,  0.46008982],
       [ 2.43779609, -3.08329069, -0.06993365, ...,  1.03854359,
        -0.73571541,  0.0353984 ],
       [ 0.44384355, -0.45585719,  0.21018005, ...,  0.2332257 ,
         0.22492599,  0.49699014]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>acceptance_rate</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.8204 1.0 0.9347 ... 0.9329 0.6084</div><input id="attrs-6d651958-ed7c-49df-ab21-cb67bf5ad093" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6d651958-ed7c-49df-ab21-cb67bf5ad093" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-c39ad15d-b226-4457-b085-f3974257ba98" class="xr-var-data-in" type="checkbox"><label for="data-c39ad15d-b226-4457-b085-f3974257ba98" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.82042869, 1.        , 0.93469731, ..., 0.95857114, 0.70718637,
        1.        ],
       [1.        , 0.73178201, 1.        , ..., 0.88783422, 1.        ,
        0.58111551],
       [0.44270245, 1.        , 0.56139929, ..., 0.62029098, 0.81898572,
        0.7565999 ],
       [0.76746633, 1.        , 0.92169958, ..., 0.69352264, 0.93285844,
        0.60835898]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>step_size</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.282 1.282 1.282 ... 1.388 1.388</div><input id="attrs-3f30d8c3-b4da-4172-b7bc-a11b20475acc" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-3f30d8c3-b4da-4172-b7bc-a11b20475acc" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1f1f8eb3-3460-42f6-920b-329962d0f2f6" class="xr-var-data-in" type="checkbox"><label for="data-1f1f8eb3-3460-42f6-920b-329962d0f2f6" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[1.28189915, 1.28189915, 1.28189915, ..., 1.28189915, 1.28189915,
        1.28189915],
       [1.65371184, 1.65371184, 1.65371184, ..., 1.65371184, 1.65371184,
        1.65371184],
       [0.91887244, 0.91887244, 0.91887244, ..., 0.91887244, 0.91887244,
        0.91887244],
       [1.38841161, 1.38841161, 1.38841161, ..., 1.38841161, 1.38841161,
        1.38841161]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>perf_counter_diff</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0003708 0.0001856 ... 0.0001655</div><input id="attrs-d186b0e2-d707-4e9e-961d-d16db3ecbaf9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-d186b0e2-d707-4e9e-961d-d16db3ecbaf9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-960c9a92-d69b-4825-92bf-75ba19db0801" class="xr-var-data-in" type="checkbox"><label for="data-960c9a92-d69b-4825-92bf-75ba19db0801" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.0003708 , 0.00018562, 0.00059582, ..., 0.0004893 , 0.00067121,
        0.0004237 ],
       [0.00073886, 0.00020752, 0.00036114, ..., 0.00033525, 0.00017037,
        0.00032983],
       [0.00052011, 0.00020457, 0.00055497, ..., 0.00055143, 0.00065044,
        0.00049124],
       [0.00034257, 0.00017319, 0.00039245, ..., 0.00032706, 0.00032707,
        0.00016552]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>n_steps</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">3.0 1.0 3.0 3.0 ... 3.0 3.0 3.0 1.0</div><input id="attrs-05cfeff2-cc74-4f61-9914-4a012d631af6" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-05cfeff2-cc74-4f61-9914-4a012d631af6" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-8e5f5800-4a66-45eb-9344-799fa9a0479e" class="xr-var-data-in" type="checkbox"><label for="data-8e5f5800-4a66-45eb-9344-799fa9a0479e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[3., 1., 3., ..., 3., 3., 3.],
       [3., 1., 3., ..., 3., 1., 3.],
       [3., 1., 3., ..., 3., 3., 3.],
       [3., 1., 3., ..., 3., 3., 1.]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>max_energy_error</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.4121 -0.1623 ... 0.2249 0.497</div><input id="attrs-cb96dae1-a875-4565-ae87-7107585ee9ad" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-cb96dae1-a875-4565-ae87-7107585ee9ad" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5a76b9e4-8db6-4191-a5e4-d8031dd552e6" class="xr-var-data-in" type="checkbox"><label for="data-5a76b9e4-8db6-4191-a5e4-d8031dd552e6" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 0.41210883, -0.16227842,  0.08303311, ..., -0.34669265,
         0.80805578, -0.59409016],
       [-0.13203102,  0.31227261, -0.60366542, ...,  0.30695791,
        -0.39285536,  0.94102373],
       [ 2.43779609, -3.08329069,  1.34870021, ...,  1.03854359,
         0.78316563,  0.50132572],
       [ 0.44384355, -0.45585719,  0.21018005, ...,  0.83486592,
         0.22492599,  0.49699014]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>lp</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-11.27 -10.9 ... -12.39 -13.86</div><input id="attrs-f310617f-8b98-4d0d-b197-494da8c9db21" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f310617f-8b98-4d0d-b197-494da8c9db21" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-3adcd9f0-b16e-48ed-b87b-932bcbbc43ae" class="xr-var-data-in" type="checkbox"><label for="data-3adcd9f0-b16e-48ed-b87b-932bcbbc43ae" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-11.26839293, -10.89924656, -11.09694511, ..., -11.12771232,
        -12.47866693, -11.59932148],
       [-11.41949717, -12.19497203, -10.65743957, ..., -12.03263471,
        -10.90881704, -12.36526537],
       [-18.74828402, -11.21456692, -10.92158114, ..., -14.43463722,
        -12.29527821, -12.33350256],
       [-12.39831206, -11.04611795, -11.60034496, ..., -11.63140398,
        -12.38893896, -13.86443289]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>tree_depth</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">2 1 2 2 1 1 2 2 ... 1 2 2 2 2 2 2 1</div><input id="attrs-4eef5c47-b260-4b54-8165-4fcc7b707cea" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-4eef5c47-b260-4b54-8165-4fcc7b707cea" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b3b4ad64-37ae-45f8-8e5f-87104448cecd" class="xr-var-data-in" type="checkbox"><label for="data-b3b4ad64-37ae-45f8-8e5f-87104448cecd" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[2, 1, 2, ..., 2, 2, 2],
       [2, 1, 2, ..., 2, 1, 2],
       [2, 1, 2, ..., 2, 2, 2],
       [2, 1, 2, ..., 2, 2, 1]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>largest_eigval</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">nan nan nan nan ... nan nan nan nan</div><input id="attrs-158684fc-c801-4765-925f-0404e0e33216" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-158684fc-c801-4765-925f-0404e0e33216" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4e825701-be10-4187-ba59-3fbaceb2ea4c" class="xr-var-data-in" type="checkbox"><label for="data-4e825701-be10-4187-ba59-3fbaceb2ea4c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>diverging</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">bool</div><div class="xr-var-preview xr-preview">False False False ... False False</div><input id="attrs-8fb145ce-632f-47ac-81ef-c2e025daf612" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-8fb145ce-632f-47ac-81ef-c2e025daf612" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-e0888505-1376-4a2d-8aaa-a26390f693ab" class="xr-var-data-in" type="checkbox"><label for="data-e0888505-1376-4a2d-8aaa-a26390f693ab" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>step_size_bar</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.166 1.166 1.166 ... 1.168 1.168</div><input id="attrs-ff281ac0-c579-4a59-bf01-3ea35d0db27e" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ff281ac0-c579-4a59-bf01-3ea35d0db27e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-194f3a95-0baf-4968-9b49-55c8e9f3928a" class="xr-var-data-in" type="checkbox"><label for="data-194f3a95-0baf-4968-9b49-55c8e9f3928a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[1.16643983, 1.16643983, 1.16643983, ..., 1.16643983, 1.16643983,
        1.16643983],
       [1.24685047, 1.24685047, 1.24685047, ..., 1.24685047, 1.24685047,
        1.24685047],
       [1.15006498, 1.15006498, 1.15006498, ..., 1.15006498, 1.15006498,
        1.15006498],
       [1.1680731 , 1.1680731 , 1.1680731 , ..., 1.1680731 , 1.1680731 ,
        1.1680731 ]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>process_time_diff</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.00037 0.000186 ... 0.000166</div><input id="attrs-ee687339-a13c-4869-b50d-081ad15d8787" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ee687339-a13c-4869-b50d-081ad15d8787" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1b3b49c2-548a-4431-a41b-d5cd10d08866" class="xr-var-data-in" type="checkbox"><label for="data-1b3b49c2-548a-4431-a41b-d5cd10d08866" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.00037 , 0.000186, 0.000588, ..., 0.000485, 0.000665, 0.000425],
       [0.000712, 0.000208, 0.000362, ..., 0.000335, 0.000171, 0.00033 ],
       [0.000521, 0.000204, 0.000556, ..., 0.00054 , 0.00062 , 0.000485],
       [0.000343, 0.000174, 0.000392, ..., 0.000328, 0.000328, 0.000166]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>energy</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">12.61 11.23 11.34 ... 12.58 14.33</div><input id="attrs-636afb04-f72f-4906-b66d-25ea2055ab82" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-636afb04-f72f-4906-b66d-25ea2055ab82" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-2cf9febb-1aca-409f-bf22-aa66574e517a" class="xr-var-data-in" type="checkbox"><label for="data-2cf9febb-1aca-409f-bf22-aa66574e517a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[12.606548  , 11.23213657, 11.34021691, ..., 11.58039343,
        13.40035712, 12.4417007 ],
       [11.97407778, 12.46569825, 11.59498637, ..., 12.21351502,
        11.71002058, 13.70855612],
       [19.8467503 , 15.74937785, 13.34838746, ..., 15.06382697,
        16.77792113, 13.81563202],
       [12.70918248, 12.00730935, 11.75583365, ..., 13.24491149,
        12.57914777, 14.32738575]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>index_in_trajectory</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">3 -1 -1 -3 1 -1 1 ... -3 -2 0 2 2 1</div><input id="attrs-652cd189-2aff-4d3f-9ea8-aa3641f8e794" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-652cd189-2aff-4d3f-9ea8-aa3641f8e794" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4ab2d064-f3fc-4608-925e-af86ab5917e1" class="xr-var-data-in" type="checkbox"><label for="data-4ab2d064-f3fc-4608-925e-af86ab5917e1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 3, -1, -1, ...,  1, -3,  1],
       [ 2,  1, -1, ..., -1,  1, -2],
       [ 1,  1,  2, ..., -2, -2, -1],
       [ 1,  1,  1, ...,  2,  2,  1]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>reached_max_treedepth</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">bool</div><div class="xr-var-preview xr-preview">False False False ... False False</div><input id="attrs-cfc7857b-ae5a-4c62-b048-a0f8c287b170" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-cfc7857b-ae5a-4c62-b048-a0f8c287b170" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-aaf73e60-2bb1-49f5-ad45-6dbc5dbf9ea6" class="xr-var-data-in" type="checkbox"><label for="data-aaf73e60-2bb1-49f5-ad45-6dbc5dbf9ea6" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>perf_counter_start</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.735e+05 1.735e+05 ... 1.735e+05</div><input id="attrs-2b272b7a-3928-46d4-b2b2-a8b1baba2bbb" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2b272b7a-3928-46d4-b2b2-a8b1baba2bbb" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1a5f21f0-9946-4179-88fb-1ec6eecc8f4a" class="xr-var-data-in" type="checkbox"><label for="data-1a5f21f0-9946-4179-88fb-1ec6eecc8f4a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[173477.39956684, 173477.40004554, 173477.4004231 , ...,
        173478.02854116, 173478.02923428, 173478.03003627],
       [173477.4183874 , 173477.41927655, 173477.41959769, ...,
        173478.08605117, 173478.08648351, 173478.08674305],
       [173477.41285357, 173477.4136103 , 173477.41410966, ...,
        173478.13264647, 173478.13333415, 173478.13420327],
       [173478.27785171, 173478.27829396, 173478.27866087, ...,
        173478.76345841, 173478.76387666, 173478.76429349]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>smallest_eigval</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">nan nan nan nan ... nan nan nan nan</div><input id="attrs-00dcd44e-526c-44fe-8881-e8b496f2bf84" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-00dcd44e-526c-44fe-8881-e8b496f2bf84" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-27d50a18-63ab-47a2-81ab-b933ba1f36de" class="xr-var-data-in" type="checkbox"><label for="data-27d50a18-63ab-47a2-81ab-b933ba1f36de" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-98e94c17-fa26-4605-8a21-8d2b4a9c39f2" class="xr-section-summary-in" type="checkbox"><label for="section-98e94c17-fa26-4605-8a21-8d2b4a9c39f2" class="xr-section-summary">Indexes: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>chain</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-09bf82ca-f135-4591-9b36-2f1fdc68f4b9" class="xr-index-data-in" type="checkbox"><label for="index-09bf82ca-f135-4591-9b36-2f1fdc68f4b9" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Int64Index([0, 1, 2, 3], dtype='int64', name='chain'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>draw</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-647f8d39-02d6-4f5b-a253-81b02a7d7781" class="xr-index-data-in" type="checkbox"><label for="index-647f8d39-02d6-4f5b-a253-81b02a7d7781" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Int64Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
            ...
            990, 991, 992, 993, 994, 995, 996, 997, 998, 999],
           dtype='int64', name='draw', length=1000))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-bdce3015-8e74-4cf9-ae07-f6f3fe6c7ce6" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-bdce3015-8e74-4cf9-ae07-f6f3fe6c7ce6" class="xr-section-summary">Attributes: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2023-09-23T12:35:22.140158</dd><dt><span>arviz_version :</span></dt><dd>0.16.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.5.0</dd><dt><span>sampling_time :</span></dt><dd>19.50476098060608</dd><dt><span>tuning_steps :</span></dt><dd>1000</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_observed_data7fa659d8-037e-41bb-a034-2f4482d70c16" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_observed_data7fa659d8-037e-41bb-a034-2f4482d70c16" class="xr-section-summary">observed_data</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (y_dim_0: 2)
Coordinates:
  * y_dim_0  (y_dim_0) int64 0 1
Data variables:
    y        (y_dim_0) int64 200 200
Attributes:
    created_at:                 2023-09-23T12:35:22.145975
    arviz_version:              0.16.0
    inference_library:          pymc
    inference_library_version:  5.5.0</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-49b77f0a-5115-4ba4-88c2-9a80fe7cbe1b" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-49b77f0a-5115-4ba4-88c2-9a80fe7cbe1b" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">y_dim_0</span>: 2</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-6effe28f-43f9-415f-8336-3a3a0f85e1db" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-6effe28f-43f9-415f-8336-3a3a0f85e1db" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">y_dim_0</span></div><div class="xr-var-dims">(y_dim_0)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1</div><input id="attrs-edd59b44-0dee-415d-b03c-ecc827889958" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-edd59b44-0dee-415d-b03c-ecc827889958" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ee0652ba-ba09-4a8f-8182-238292b41f25" class="xr-var-data-in" type="checkbox"><label for="data-ee0652ba-ba09-4a8f-8182-238292b41f25" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-a4cb44f0-fe25-451f-8657-b39eacac4bc3" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-a4cb44f0-fe25-451f-8657-b39eacac4bc3" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y</span></div><div class="xr-var-dims">(y_dim_0)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">200 200</div><input id="attrs-72efed6b-61b3-4682-b9ad-078ced66bd87" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-72efed6b-61b3-4682-b9ad-078ced66bd87" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b407862b-2479-4e92-adc9-6f0a6d0cd113" class="xr-var-data-in" type="checkbox"><label for="data-b407862b-2479-4e92-adc9-6f0a6d0cd113" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([200, 200])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-4e50e685-34cf-4036-8218-1b5f54e00fc1" class="xr-section-summary-in" type="checkbox"><label for="section-4e50e685-34cf-4036-8218-1b5f54e00fc1" class="xr-section-summary">Indexes: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>y_dim_0</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-43881ec4-283c-40a9-be2d-572c912ae0d0" class="xr-index-data-in" type="checkbox"><label for="index-43881ec4-283c-40a9-be2d-572c912ae0d0" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Int64Index([0, 1], dtype='int64', name='y_dim_0'))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-b7069534-24b0-45fd-9748-14f303468683" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-b7069534-24b0-45fd-9748-14f303468683" class="xr-section-summary">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2023-09-23T12:35:22.145975</dd><dt><span>arviz_version :</span></dt><dd>0.16.0</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.5.0</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
              </ul>
            </div>
            <style> /* CSS stylesheet for displaying InferenceData objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-sections.group-sections {
  grid-template-columns: auto;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
.xr-wrap{width:700px!important;} </style>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>The output type is different, it is now a <code>InferenceData</code> object.</p>
</div>
</div>
</div>
<p><br></p>
<p>It is easy to use the information in the object:</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>trace.posterior.theta.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>(4, 1000, 2)</code></pre>
</div>
</div>
<aside class="notes">
<p>as an example, for theta we have 4 chains, each with 1000 draws. So for theta_A we have 4 chains, each with 1000 draws.</p>
<p>explain the InferenceData object</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="exploring-the-posterior" class="slide level2">
<h2>Exploring the Posterior</h2>
<p><br><br></p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>pm.summary(trace, var_names<span class="op">=</span>[<span class="st">"theta"</span>, <span class="st">"uplift"</span>]).loc[:, [<span class="st">"mean"</span>,<span class="st">"sd"</span>, <span class="st">"hdi_3%"</span>, <span class="st">"hdi_97%"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">theta[0]</td>
<td>0.201</td>
<td>0.013</td>
<td>0.178</td>
<td>0.225</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">theta[1]</td>
<td>0.201</td>
<td>0.012</td>
<td>0.178</td>
<td>0.224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">uplift</td>
<td>0.002</td>
<td>0.090</td>
<td>-0.164</td>
<td>0.170</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<aside class="notes">
<p>did you expect to have 0.2 as the mean for theta_A? why?</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="exploring-the-posterior-1" class="slide level2">
<h2>Exploring the Posterior</h2>
<p><br></p>
<p>We can also use the <code>ArviZ</code> library for plotting. The main advantage is that it works pretty well with the output data. Also, it gives the HDI for the Relative Uplift distribution.</p>
<p><br></p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb19" data-code-line-numbers="1,3,4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a>arviz.plot_posterior(trace.posterior[<span class="st">"uplift"</span>],</span>
<span id="cb19-2"><a href="#cb19-2"></a>                        figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">3</span>),</span>
<span id="cb19-3"><a href="#cb19-3"></a>                        ref_val<span class="op">=</span><span class="dv">0</span>,  </span>
<span id="cb19-4"><a href="#cb19-4"></a>                        hdi_prob<span class="op">=</span> <span class="fl">0.95</span>)</span>
<span id="cb19-5"><a href="#cb19-5"></a></span>
<span id="cb19-6"><a href="#cb19-6"></a>plt.title(<span class="st">"B vs. A Relative Uplift Distribution"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img data-src="slide_files/figure-revealjs/cell-16-output-1.png" width="398" height="278"></p>
</div>
</div>
<aside class="notes">
<p>We will work more with <code>InferenceData</code> and <code>ArviZ</code> in the hands-on session.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="value-conversion" class="slide level2">
<h2>Value Conversion</h2>
<p><br></p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>So far we have compared A and B variants in terms of how many <code>subscription</code> they generate</li>
<li>We estimated the relative uplift of conversions between A and B</li>
</ul>
<blockquote>
<p>We solved a <span style="background-color: yellow;">Bernoulli Conversion</span> problem</p>
</blockquote>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_120197715.jpeg" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>Now what if we wanted to compare A and B variants in terms of how much <code>revenue</code> they generate</li>
<li>We would like to estimate the relative <code>uplift of revenue</code> between A and B</li>
</ul>
<blockquote>
<p>We’d like to solve a <span style="background-color: yellow;">Value Conversion</span> problem</p>
</blockquote>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_545777518.jpeg" style="width:75.0%;height:75.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="setting-up-the-model-2" class="slide level2">
<h2>Setting up the Model</h2>
<p><br></p>
<div class="columns">
<div class="column" style="width:60%;">
<p>Suppose that a single visitor <span class="math inline">\(i\)</span> has a probability <span class="math inline">\(\theta\)</span> of paying at all. So, we can model the conversion as a Bernoulli trial:</p>
<p><span class="math display">\[conv_i \sim \mathrm{Bernoulli}(\color{red} \theta)\]</span></p>
<div class="fragment">
<p><span class="math display">\[\color{red} \theta \sim \mathrm{Beta}(\alpha_1, \beta_1)\]</span></p>
</div>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_120197715.jpeg" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<div class="columns">
<div class="column" style="width:60%;">
<p>We assume that if a visitor pays, they spend an amount <span class="math inline">\(rev\)</span> that is exponentially distributed with rate <span class="math inline">\(\lambda\)</span>:</p>
<p><span class="math display">\[rev_i \sim \mathrm{Exponential}(\color{red} \lambda)\]</span></p>
<div class="fragment">
<p><span class="math display">\[\color{red} \lambda \sim \mathrm{Gamma}(\alpha_2, \beta_2)\]</span></p>
</div>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_545777518.jpeg" style="width:75.0%;height:75.0%"></p>
</figure>
</div>
</div>
</div>
<aside class="notes">
<p>This is already the Bernoulli conversion model we have seen before. What is new in the Value Conversion model is the following. In this setting, we have two priors, one for <span class="math inline">\(\theta\)</span> and one for <span class="math inline">\(\lambda\)</span>. So, we need two likelihoods, one for <span class="math inline">\(conv_i\)</span> and one for <span class="math inline">\(rev_i\)</span>. By combining the two priors and likelihoods, we can estimate two posteriors, one for <span class="math inline">\(\theta\)</span> and one for <span class="math inline">\(\lambda\)</span>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="what-do-we-need" class="slide level2">
<h2>What Do We Need?</h2>
<p><br> Our goal is to find out <code>revenue per visitor</code>. The expected revenue per visitor is <span class="math inline">\(\frac{\theta}{\lambda}\)</span>.</p>
<p>So we need:</p>
<ul>
<li>the posterior of <span class="math inline">\(\theta\)</span></li>
<li>the posterior of <span class="math inline">\(\lambda\)</span></li>
<li>to calculate <span class="math inline">\(\frac{\theta}{\lambda}\)</span></li>
<li>to calculate the uplift of revenue between A and B</li>
</ul>
<p><br></p>
<blockquote>
<p>We should go the same way as before:&nbsp;we need to define the <code>priors</code> and <code>likelihoods</code>, and obtain <code>posteriors</code> for <span class="math inline">\(\theta\)</span> and <span class="math inline">\(\lambda\)</span>.</p>
</blockquote>
</section>
<section id="what-do-we-need-1" class="slide level2">
<h2>What Do We Need?</h2>
<h4 id="likelihoods-1">Likelihoods</h4>
<p>In reality we have more than just a single visitor.</p>
<p><br></p>
<p>So, the total conversions follows a Binomial distribution:</p>
<div class="columns">
<div class="column" style="width:70%;">
<p><span class="math display">\[\begin{align*}
conv &amp;=  \sum^{\# \text{visitors}} conv_i \\
&amp;= \sum^{\# \text{visitors}}\mathrm{Bernoulli}(\theta)
\sim \mathrm{Binomial}(\# \text{visitors}, \theta)
\end{align*}\]</span></p>
</div><div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_607420431.png" style="width:25.0%"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>The total revenue follows a Gamma distribution:</p>
<div class="columns">
<div class="column" style="width:70%;">
<p><span class="math display">\[\begin{align*}
rev &amp;= \sum^{\# \text{payers}} rev_i \\
&amp;= \sum^{\# \text{payers}}\mathrm{Exponential}(\lambda)
\sim \mathrm{Gamma}(\# \text{payers}, \lambda)
\end{align*}\]</span></p>
</div><div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/AdobeStock_607420431.png" style="width:25.0%"></p>
</figure>
</div>
</div>
</div>
<aside class="notes">

<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="what-do-we-need-2" class="slide level2">
<h2>What Do We Need?</h2>
<h4 id="priors-and-likelihoods">Priors and Likelihoods</h4>
<p>Let’s complete the setting by bringing in the variants A and B:</p>
<p>We have two <span style="background-color: Lightyellow;">conversion likelihoods</span>:</p>
<p><span class="math display">\[\begin{align*}
conv_A &amp;\sim \mathrm{Binomial}(N_A, \color{red}{\theta_A}) \\
conv_B &amp;\sim \mathrm{Binomial}(N_B, \color{red}{\theta_B}) \\
\end{align*}\]</span></p>
<p>and our <span style="background-color: rgba(255, 99, 71, 0.2);">prior</span> about conversion probabilities are:</p>
<p><span class="math display">\[\color{red}{\theta_A} = \color{red}{\theta_B} \sim \mathrm{Beta}(\alpha_1, \beta_1)\]</span></p>
<p><br></p>
<p>We have two <span style="background-color: Lightyellow;">revenue likelihoods</span>:</p>
<p><span class="math display">\[\begin{align*}
rev_A &amp;\sim \mathrm{Gamma}(conv_A, \color{red}{\lambda_A}) \\
rev_B &amp;\sim \mathrm{Gamma}(conv_B, \color{red}{\lambda_B})
\end{align*}\]</span></p>
<p>and our <span style="background-color: rgba(255, 99, 71, 0.2);">prior</span> about the amounts spent are:</p>
<p><span class="math display">\[\color{red}{\lambda_A} = \color{red}{\lambda_B} \sim \mathrm{Gamma}(\alpha_2, \beta_2)\]</span></p>
<aside class="notes">

<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<!-- ## Posteriors

<br>

We have four posteriors:

<br>

$$\theta: \left\{
    \begin{array}{ll}
    \theta_A \sim \mathrm{Beta}(\alpha_1 + conv_A, \beta_1 + N_A - conv_A) \\
    \theta_B \sim \mathrm{Beta}(\alpha_1 + conv_B, \beta_1 + N_B - conv_B) 
    \end{array}
\right.$$

<br>

$$\lambda: \left\{
    \begin{array}{ll}
    \lambda_A \sim \mathrm{Gamma}(\alpha_2 + conv_A, \beta_2 + rev_A) \\
    \lambda_B \sim \mathrm{Gamma}(\alpha_2 + conv_B, \beta_2 + rev_B) 
    \end{array}
\right.$$ -->
</section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<p><br></p>
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="img/frame.jpg" style="width:70.0%;height:70.0%"></p>
</figure>
</div>
<div class="columns">
<div class="column fragment" style="width:30%;">
<p><span class="math display">\[\theta: \left\{
    \begin{array}{ll}
    \theta_A  \sim \mathrm{Beta}(\alpha_1, \beta_1) \\
    \theta_B \sim \mathrm{Beta}(\alpha_1, \beta_1)
    \end{array}
\right.\]</span></p>
</div><div class="column fragment" style="width:10%;">
<div class="quarto-figure quarto-figure-right">
<figure>
<p><img data-src="img/AdobeStock_607420431.png" style="width:70.0%;height:70.0%"></p>
</figure>
</div>
</div><div class="column fragment" style="width:60%;">
<p><span class="math display">\[\begin{array}{ll}
    \theta_A \sim \mathrm{Beta}(\alpha_1 + conv_A, \beta_1 + N_A - conv_A) \\
    \theta_B \sim \mathrm{Beta}(\alpha_1 + conv_B, \beta_1 + N_B - conv_B)
    \end{array}\]</span></p>
</div>
</div>
<p><br></p>
<div class="columns">
<div class="column fragment" style="width:30%;">
<p><span class="math display">\[\lambda: \left\{
    \begin{array}{ll}
    \lambda_A \sim \mathrm{Gamma}(\alpha_2, \beta_2) \\
    \lambda_B \sim \mathrm{Gamma}(\alpha_2, \beta_2)
    \end{array}
\right.\]</span></p>
</div><div class="column fragment" style="width:10%;">
<div class="quarto-figure quarto-figure-right">
<figure>
<p><img data-src="img/AdobeStock_607420431.png" style="width:70.0%;height:70.0%"></p>
</figure>
</div>
</div><div class="column fragment" style="width:60%;">
<p><span class="math display">\[\begin{array}{ll}
    \lambda_A \sim \mathrm{Gamma}(\alpha_2 + conv_A, \beta_2 + rev_A) \\
    \lambda_B \sim \mathrm{Gamma}(\alpha_2 + conv_B, \beta_2 + rev_B)
    \end{array}\]</span></p>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>To be rigorous in the notation, we should write <span class="math inline">\(\lambda|x\)</span> and <span class="math inline">\(\theta|x\)</span> for the posteriors, but we omit the <span class="math inline">\(|x\)</span> for brevity.</p>
</div>
</div>
</div>
</div>
</section>
<section id="what-do-we-want-to-know-1" class="slide level2">
<h2>What Do We Want to Know?</h2>
<p>Our goal is to find out which version is more profitable, so we should compare the <code>revenue per visitor</code> between A and B.</p>
<p>We obtain the <code>revenue per visitor</code> for each variant by:</p>
<p><span class="math display">\[\mu_A =  \dfrac{\theta_A}{\lambda_A}, \quad  \mu_B =  \dfrac{\theta_B}{\lambda_B}\]</span></p>
<p>and the relative uplift is:</p>
<p><span class="math display">\[uplift = \frac{\mu_B}{\mu_A} - 1\]</span></p>
<ul>
<li>if the <code>uplift &gt; 0</code>, then version B is more profitable</li>
<li>if the <code>uplift &lt; 0</code>, then version A is more profitable</li>
<li>if the <code>uplift = 0</code>, then both are equally profitable</li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Again, we get the whole distribution of the uplift, not just these three states 😃</p>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><span class="math inline">\(\mu\)</span> here represents the average revenue per visitor, including those who don’t make a purchase. This is the best way to capture the overall revenue effect - some variants may increase the average sales value, but reduce the proportion of visitors that pay at all (e.g.&nbsp;if we promoted more expensive items on the landing page).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<!-- ## Let's do this in ![](https://cdn.rawgit.com/pymc-devs/pymc/main/docs/logos/svg/PyMC_banner.svg){.center} -->
</section>
<section id="creating-the-model-in" class="slide level2">
<h2>Creating the Model in <img data-src="img/PyMC.png" class="center"></h2>
<!-- ```{python}
#| echo: false
#| eval: false
# as before we have variants A and B
variants  = ['A', 'B']
# let's define the revenue data
# each variant has 1000 visitors 
visitors      = [1000, 1000]

# 100 of which leads to purchase, i.e. conversion rate is 10%
purchased     = [100, 100]

# each purchase is worth 10, i.e. mean purchase is 10
total_revenue = [1000, 1000]

# let's define parameters for a prior for the conversion rates
conv_alpha, conv_beta = [5000, 5000]

# let's define parameters for the mean purchase prior
purchase_alpha, purchase_beta = [9000, 900]
``` -->
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb20" data-code-line-numbers="1|3,17|3-15|5-8|11-15|17-29|19-22|25-29|32|32,37|35-36|41"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a><span class="cf">with</span> pm.Model() <span class="im">as</span> example_model:</span>
<span id="cb20-2"><a href="#cb20-2"></a></span>
<span id="cb20-3"><a href="#cb20-3"></a>    <span class="co">#-----------------------------------------------conversion rate model</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>    <span class="co"># Priors for unknown model parameters</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>    theta <span class="op">=</span> pm.Beta(<span class="st">"theta"</span>,</span>
<span id="cb20-6"><a href="#cb20-6"></a>                    alpha <span class="op">=</span> conv_alpha, </span>
<span id="cb20-7"><a href="#cb20-7"></a>                    beta  <span class="op">=</span> conv_beta, </span>
<span id="cb20-8"><a href="#cb20-8"></a>                    shape <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb20-9"><a href="#cb20-9"></a>    </span>
<span id="cb20-10"><a href="#cb20-10"></a>    <span class="co"># Likelihood of observations</span></span>
<span id="cb20-11"><a href="#cb20-11"></a>    converted <span class="op">=</span> pm.Binomial(<span class="st">"converted"</span>, </span>
<span id="cb20-12"><a href="#cb20-12"></a>                            n        <span class="op">=</span> visitors,      </span>
<span id="cb20-13"><a href="#cb20-13"></a>                            observed <span class="op">=</span> purchased,     </span>
<span id="cb20-14"><a href="#cb20-14"></a>                            p        <span class="op">=</span> theta,         </span>
<span id="cb20-15"><a href="#cb20-15"></a>                            shape    <span class="op">=</span> <span class="dv">2</span>)  </span>
<span id="cb20-16"><a href="#cb20-16"></a>    </span>
<span id="cb20-17"><a href="#cb20-17"></a>    <span class="co">#------------------------------------------------revenue model</span></span>
<span id="cb20-18"><a href="#cb20-18"></a>    <span class="co"># Priors for unknown model parameters</span></span>
<span id="cb20-19"><a href="#cb20-19"></a>    lamda <span class="op">=</span> pm.Gamma( <span class="st">"lamda"</span>, </span>
<span id="cb20-20"><a href="#cb20-20"></a>                    alpha <span class="op">=</span> purchase_alpha,</span>
<span id="cb20-21"><a href="#cb20-21"></a>                    beta  <span class="op">=</span> purchase_beta,</span>
<span id="cb20-22"><a href="#cb20-22"></a>                    shape <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb20-23"><a href="#cb20-23"></a>    </span>
<span id="cb20-24"><a href="#cb20-24"></a>    <span class="co"># Likelihood of observations</span></span>
<span id="cb20-25"><a href="#cb20-25"></a>    revenue <span class="op">=</span> pm.Gamma(<span class="st">"revenue"</span>, </span>
<span id="cb20-26"><a href="#cb20-26"></a>                        alpha    <span class="op">=</span> purchased,            </span>
<span id="cb20-27"><a href="#cb20-27"></a>                        observed <span class="op">=</span> total_revenue, </span>
<span id="cb20-28"><a href="#cb20-28"></a>                        beta     <span class="op">=</span> lamda, </span>
<span id="cb20-29"><a href="#cb20-29"></a>                        shape    <span class="op">=</span> <span class="dv">2</span>)        </span>
<span id="cb20-30"><a href="#cb20-30"></a>    </span>
<span id="cb20-31"><a href="#cb20-31"></a>    <span class="co"># get the revenue per visitor</span></span>
<span id="cb20-32"><a href="#cb20-32"></a>    revenue_per_visitor <span class="op">=</span> pm.Deterministic(<span class="st">"revenue_per_visitor"</span>, theta <span class="op">/</span> lamda)</span>
<span id="cb20-33"><a href="#cb20-33"></a></span>
<span id="cb20-34"><a href="#cb20-34"></a>    <span class="co">#------------------------------------------------relative uplifts</span></span>
<span id="cb20-35"><a href="#cb20-35"></a>    theta_uplift <span class="op">=</span> pm.Deterministic(<span class="ss">f"theta uplift"</span>, theta[<span class="dv">1</span>] <span class="op">/</span> theta[<span class="dv">0</span>] <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb20-36"><a href="#cb20-36"></a>    lamda_uplift <span class="op">=</span> pm.Deterministic(<span class="ss">f"lamda uplift"</span>, (<span class="dv">1</span> <span class="op">/</span> lamda[<span class="dv">1</span>]) <span class="op">/</span> (<span class="dv">1</span> <span class="op">/</span> lamda[<span class="dv">0</span>]) <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb20-37"><a href="#cb20-37"></a>    uplift       <span class="op">=</span> pm.Deterministic(<span class="ss">f"uplift"</span>, revenue_per_visitor[<span class="dv">1</span>] <span class="op">/</span> revenue_per_visitor[<span class="dv">0</span>] <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb20-38"><a href="#cb20-38"></a></span>
<span id="cb20-39"><a href="#cb20-39"></a>    <span class="co">#------------------------------------------------posterior</span></span>
<span id="cb20-40"><a href="#cb20-40"></a>    <span class="co"># draw posterior samples</span></span>
<span id="cb20-41"><a href="#cb20-41"></a>    trace <span class="op">=</span> pm.sample(draws<span class="op">=</span><span class="dv">1000</span>, return_inferencedata<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-2" class="slide level2" data-chalkboard-buttons="false" data-background-image="../assets/img/Handson_AdobeStock_316152114.jpeg" data-background-position="center" data-background-repeat="no-repeat" data-background-opacity="0.5" data-background-size="cover">
<h2></h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../assets/img/python-logo-inkscape.svg" style="width:30.0%;height:30.0%"></p>
</figure>
</div>
<p>After the coffee break:</p>
<ul>
<li>Open the Jupyter notebooks named <code>Handson_1.ipynb</code> and <code>Handson_2.ipynb</code> in the <code>Day2-02</code> folder.</li>
<li>Follow the instructions in the notebooks and run the codes.</li>
<li>If you had time and want to do more, you can also try the <code>bonus.ipynb</code> notebook.</li>
<li>You will be able to find the solution notebooks before the next session.</li>
<li><span style="color:#ff412c; font-weight: bold;">Please be back here at 11:30</span></li>
</ul>
<div class="footer">

</div>
</section>
<section id="section-3" class="slide level2" data-chalkboard-buttons="false" data-background-image="../assets/img/Quiz_AdobeStock_439133763.jpeg" data-background-position="center" data-background-repeat="no-repeat" data-background-opacity="0.9" data-background-size="cover">
<h2></h2>
</section>
<section id="section-4" class="slide level2" data-chalkboard-buttons="false" data-background-image="../assets/img/Coffee_AdobeStock_318442666.jpeg" data-background-size="cover" data-background-opacity="0.8">
<h2></h2>
<div class="footer">

</div>
<p><img src="../assets/img/logo_red.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="slide_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="slide_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="slide_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="slide_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="slide_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="slide_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="slide_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="slide_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="slide_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="slide_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="slide_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":false},
'chalkboard': {"buttons":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>